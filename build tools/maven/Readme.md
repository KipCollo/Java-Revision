# Maven

Maven is an attempt to apply patterns to a project's build infrastructure in order to promote comprehension and productivity by providing a clear path in the use of best practices. Maven is essentially a project management and comprehension tool and as such provides a way to help with managing:

1. Builds
2. Documentation
3. Reporting
4. Dependencies
5. SCMs
6. Releases
7. Distribution

To create our first Maven project we are going to use Maven's archetype mechanism. An archetype is defined as an original pattern or model from which all other things of the same kind are made. In Maven, an archetype is a template of a project which is combined with some user input to produce a working Maven project that has been tailored to the user's requirements.

On to creating your first project! In order to create the simplest of Maven projects, execute the following from the command line:

```bash
mvn -B archetype:generate -DgroupId=com.mycompany.app -DartifactId=my-app -DarchetypeArtifactId=maven-archetype-quickstart -DarchetypeVersion=1.4
```

Once you have executed this command, you will notice a few things have happened. First, you will notice that a directory named my-app has been created for the new project, and this directory contains a file named pom.xml that should look like this:

```xml
 <project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">

<modelVersion>4.0.0</modelVersion>
<groupId>com.mycompany.app</groupId>
<artifactId>my-app</artifactId>
<version>1.0-SNAPSHOT</version>

<name>my-app</name>
<!-- FIXME change it to the project's website -->
<url>http://www.example.com</url>

<properties>
<project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
<maven.compiler.source>1.7</maven.compiler.source>
<maven.compiler.target>1.7</maven.compiler.target>
</properties>

<dependencies>
<dependency>
<groupId>junit</groupId>
<artifactId>junit</artifactId>
<version>4.11</version>
<scope>test</scope>
</dependency>
</dependencies>

<build>
<pluginManagement><!-- lock down plugins versions to avoid using Maven defaults(may be moved to parent pom) -->
... lots of helpful plugins
</pluginManagement>
</build>
 </project>
```

pom.xml contains the Project Object Model (POM) for this project. The POM is the basic unit of work in Maven.This is important to remember because Maven is inherently project-centric in that everything revolves around the notion of a project.

POM contains every important piece of information about your project and is essentially one-stop-shopping for finding anything related to your project.

1. project- This is the top-level element in all Maven pom.xml files.
2. modelVersion This element indicates what version of the object model this POM is using. The version of the model itself changes very infrequently but it is mandatory in order to ensure stability of use if and when the Maven developers deem it necessary to change the model.
3. groupId This element indicates the unique identifier of the organization or group that created the project. The groupId is one of the key identifiers of a project and is typically based on the fully qualified domain name of your organization. For example org.apache.maven.plugins is the designated groupId for all Maven plugins.
▪ artifactId This element indicates the unique base name of the primary artifact being generated by this project.
The primary artifact for a project is typically a JAR file. Secondary artifacts like source bundles also use the
artifactId as part of their final name. A typical artifact produced by Maven would have the form <artifactId>-
<version>.<extension> (for example, myapp-1.0.jar ).
▪ version This element indicates the version of the artifact generated by the project. Maven goes a long way to
help you with version management and you will often see the SNAPSHOT designator in a version, which
indicates that a project is in a state of development. We will discuss the use of snapshots (./index.html#what-is-
a-snapshot-version) and how they work further on in this guide.
▪ name This element indicates the display name used for the project. This is often used in Maven's generated
documentation.
▪ url This element indicates where the project's site can be found. This is often used in Maven's generated
documentation.
▪ properties This element contains value placeholders accessible anywhere within a POM.
▪ dependencies This element's children list dependencies (/pom.html#dependencies). The cornerstone of the
POM.
▪ build This element handles things like declaring your project's directory structure and managing plugins.

The following directory structure has is also created:

ProjectName\
|-pom.xml
|-src
    |-main
        |-java
            |-com.kipcollo
                    Application.java-----Main class,starts spring boot application
             com.kipcollo.Controller
    |-resource
        application.properties

This is the standard layout for Maven projects (the application sources reside in ${project.basedir}/src/main/java and test sources reside in ${project.basedir}/src/test/java , where ${project.basedir} represents the directory containing pom.xml ).

- Compiling application: Change to the directory where pom.xml is created by archetype:generate and execute the following command to compile your application sources:

```bash
mvn compile
```

Maven will need to download all the plugins and related dependencies it needs to fulfill the command.
Compiled classes were placed in ${project.basedir}/target/classes , which is another standard convention employed by Maven.

- run unit tests: Now you've successfully compiled your application's sources and now you've got some unit tests that you want to compile and execute

```bash
mvn test
```

Maven downloads more dependencies this time. These are the dependencies and plugins necessary for executing the tests (it already has the dependencies it needs for compiling and won't download them again).

Before compiling and executing the tests Maven compiles the main code

If you simply want to compile your test sources (but not execute the tests), you can execute the following:

```bash
mvn test-compile
```
